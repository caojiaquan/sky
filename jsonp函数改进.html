<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>智能社——http://www.zhinengshe.com</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <style>

    </style>

</head>
<body>
<div id="box">
    <input type="button" value="按钮" @click="show(12,$event)">
</div>



<script type="text/javascript">
    jsonp({
        url: 'https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su',
        type: 'get',
        data:{
            wd: 'jsonp'
        },
        callback: 'cb',
        success: function (data) { console.log(data) }
    });

    function jsonp (options) {
        let url = options.url
        let data = options.data

        let oBody = document.getElementsByTagName('body')[0]
        let oScript = document.createElement('script')

        let callbackName = 'cb' + (~~(Math.random()*0xffffff)).toString(16)

         window[callbackName]= function (result) {
            options.success(result)
        }
        data[options.callback] = callbackName;

        oScript.setAttribute('src', url + '?' + format(data))
        oBody.append(oScript)
    }
    function format(data) {
        let str = ''
        for (var p in data) {
            str += encodeURIComponent(p) + '=' + encodeURIComponent(data[p]) + '&'
        }
        return str
    }
</script>
</body>
</html>